{% load static %}
<!DOCTYPE html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>{% block title %}Blog Musical{% endblock %}</title>

		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
		/>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
		/>

		{% block head_extra %}{% endblock %}
		<style>
			/* Paleta */
			:root {
				--color-negro: #000000;
				--color-naranja-claro: #ff6c2e;
				--color-naranja-hover: #e65a1f;
				--color-naranja-oscuro: #d25c2a;
				--color-gris-oscuro: #e5e5e5;
				--color-blanco: #ffffff;
				--color-texto: var(--color-negro);
				--color-naranja: var(--color-naranja-claro);
				--color-fondo-gris: var(--color-gris-oscuro);
				--color-fondo-claro: var(--color-blanco);
			}

			body {
				background-color: var(--color-fondo-gris);
				font-family: "Inter", sans-serif;
			}

			.btn-orange {
				background-color: var(--color-naranja);
				border-color: var(--color-naranja);
				color: var(--color-fondo-claro);
			}

			.btn-orange:hover {
				background-color: var(--color-naranja-oscuro);
				border-color: var(--color-naranja-oscuro);
			}

			.navbar-brand img {
				height: 50px;
			}

			/* Estilo general navbar items */
			.navbar-nav .nav-link {
				font-weight: 500;
				color: var(--color-negro);
				transition: color 0.2s ease;
			}

			.navbar-nav .nav-link:hover {
				color: var(--color-naranja-claro);
			}

			.navbar-nav .nav-link.active {
				color: var(--color-naranja);
			}

			/* Avatar */
			.user-avatar {
				width: 40px;
				height: 40px;
				object-fit: cover;
				border-radius: 50%;
				border: 3px solid var(--color-naranja-claro);
			}

			/* Dropdown escritorio */
			.nav-item.dropdown .nav-link {
				color: var(--color-negro);
				font-weight: 500;
			}

			.nav-item.dropdown .nav-link:hover {
				color: var(--color-naranja-claro);
			}

			.dropdown-menu {
				--bs-dropdown-bg: var(--color-blanco);
				--bs-dropdown-color: var(--color-negro);
				--bs-dropdown-border-color: transparent;
				--bs-dropdown-link-color: var(--color-negro);
				--bs-dropdown-link-hover-color: var(--color-blanco);
				--bs-dropdown-link-hover-bg: var(--color-naranja-claro);
				--bs-dropdown-link-active-color: var(--color-blanco);
				--bs-dropdown-link-active-bg: var(--color-naranja-hover);
				border-radius: 12px;
				box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
				padding: 0.5rem 0;
				opacity: 0;
				transform: translateY(8px);
				transition: opacity 0.18s ease, transform 0.18s ease;
			}

			.dropdown-menu.show {
				opacity: 1;
				transform: translateY(0);
			}

			.dropdown-item {
				font-size: 0.95rem;
				padding: 0.6rem 1.1rem;
			}

			.dropdown-item i {
				width: 18px;
				text-align: center;
			}

			.dropdown-divider {
				margin: 0.4rem 0;
			}

			/* ------------------ CARRUSEL ------------------ */
			.carousel-item img {
				height: 500px;
				object-fit: cover;
				border-radius: 12px;
				width: 100%;
			}

			@media (max-width: 768px) {
				.carousel-item img {
					height: 300px;
				}
			}

			/* ------------------ CARDS ------------------ */
			.card {
				border: none;
				border-radius: 12px;
				overflow: hidden;
				background-color: var(--color-fondo-claro);
				box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
				transition: transform 0.2s ease, box-shadow 0.2s ease;
			}

			.card:hover {
				transform: translateY(-5px);
				box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
			}

			.card img {
				object-fit: cover;
				height: 220px;
				width: 100%;
			}

			.card-body {
				padding: 1.2rem;
			}

			/* ------------------ FOOTER ------------------ */
			footer {
				background: var(--color-blanco);
				color: var(--color-negro);
			}

			footer h5 {
				color: var(--color-negro);
			}

			/* Centrar columnas y listas */
			footer .col-md-4 {
				text-align: center;
			}

			footer .col-md-4 ul {
				padding-left: 0;
				list-style: none;
			}

			.footer-link {
				color: var(--color-negro);
				text-decoration: none;
				transition: color 0.2s ease;
			}

			.footer-link:hover {
				color: var(--color-naranja);
			}

			.social-icons {
				justify-content: center;
				/* Centra los iconos sociales */
			}

			.social-icons a {
				color: var(--color-negro);
				width: 40px;
				height: 40px;
				display: flex;
				align-items: center;
				justify-content: center;
				border-radius: 50%;
				transition: background-color 0.2s ease, transform 0.2s ease;
				text-decoration: none;
			}

			.social-icons a:hover {
				background-color: var(--color-naranja-hover);
				transform: scale(1.1);
			}

			/* Ocultar dropdown en móviles */
			@media (max-width: 991.98px) {
				.nav-item.dropdown {
					display: none !important;
				}
			}

			/* Menú usuario móvil */
			.user-menu-mobile {
				background-color: var(--color-blanco);
				border-radius: 12px;
				box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
			}

			.user-menu-mobile .user-avatar {
				width: 40px;
				height: 40px;
				object-fit: cover;
				border-radius: 50%;
				border: 3px solid var(--color-naranja-claro);
			}

			.user-mobile-item {
				display: block;
				padding: 0.6rem 0.8rem;
				color: var(--color-negro);
				text-decoration: none;
				border-radius: 8px;
				transition: background-color 0.2s ease, color 0.2s ease;
			}

			.user-mobile-item:hover {
				background-color: var(--color-naranja-claro);
				color: var(--color-blanco);
			}

			.user-mobile-item i {
				width: 18px;
				text-align: center;
			}
		</style>
	</head>

	<body class="d-flex flex-column min-vh-100">
		<nav
			class="navbar navbar-expand-lg navbar-light bg-light py-3 shadow-sm"
		>
			<div class="container">
				<a class="navbar-brand" href="/"
					><img
						src="https://res.cloudinary.com/dt5xp6kba/image/upload/v1755195988/logo_schhyp.png"
						alt="Integrate Logo"
				/></a>
				<button
					class="navbar-toggler"
					type="button"
					data-bs-toggle="collapse"
					data-bs-target="#navbarNav"
					aria-controls="navbarNav"
					aria-expanded="false"
					aria-label="Toggle navigation"
				>
					<span class="navbar-toggler-icon"></span>
				</button>

				<div
					class="collapse navbar-collapse justify-content-between"
					id="navbarNav"
				>
					<ul class="navbar-nav mx-auto gap-4">
						<li class="nav-item">
							<a class="nav-link active" href="/">Inicio</a>
						</li>
						<li class="nav-item">
							<a
								class="nav-link"
								href="{% url 'blog:category_list' %}"
								>Catalogo</a
							>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="#">Colecciones</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="#">Sobre nosotros</a>
						</li>
					</ul>

					<!-- Dropdown escritorio -->
					<ul
						class="navbar-nav d-flex align-items-center d-none d-lg-flex"
					>
						{% if user.is_authenticated %}
						<li class="nav-item dropdown">
							<a
								class="nav-link dropdown-toggle d-flex align-items-center"
								href="#"
								id="navbarDropdownMenuLink"
								role="button"
								data-bs-toggle="dropdown"
							>
								<span class="d-flex align-items-center gap-2">
									<img
										src="{{ user.profile.get_avatar_url }}"
										alt="Avatar de {{ user.username }}"
										class="user-avatar"
									/>
									<span class="d-none d-lg-block"
										>{{ user.username }}</span
									>
								</span>
							</a>
							<ul
								class="dropdown-menu dropdown-menu-end"
								aria-labelledby="navbarDropdownMenuLink"
							>
								<li>
									<a
										class="dropdown-item"
										href="{% url 'blog:my_articles' %}"
										><i
											class="fa-solid fa-file-lines me-2"
										></i>
										Mis artículos</a
									>
								</li>
								<li>
									<a
										class="dropdown-item"
										href="{% url 'user_auth:profile_view' %}"
										><i class="fa-solid fa-user me-2"></i>
										Perfil</a
									>
								</li>
								<li>
									<hr class="dropdown-divider" />
								</li>
								<li>
									<a
										class="dropdown-item"
										href="{% url 'user_auth:logout' %}"
										><i
											class="fa-solid fa-right-from-bracket me-2"
										></i>
										Cerrar sesión</a
									>
								</li>
							</ul>
						</li>
						{% else %}
						<li class="nav-item d-flex align-items-center">
							<a
								href="{% url 'user_auth:login' %}"
								class="btn btn-dark me-2"
								>Iniciar sesión</a
							>
							<a
								href="{% url 'user_auth:register' %}"
								class="btn btn-orange"
								>Registrar</a
							>
						</li>
						{% endif %}
					</ul>

					<!-- Menú usuario móvil -->
					<div
						class="d-lg-none w-100 mt-3 user-menu-mobile px-3 py-3"
					>
						{% if user.is_authenticated %}
						<div class="d-flex align-items-center mb-3">
							<img
								src="{{ user.profile.get_avatar_url }}"
								alt="Avatar de {{ user.username }}"
								class="user-avatar me-2"
							/>
							<span class="fw-semibold">{{ user.username }}</span>
						</div>
						<ul class="list-unstyled mb-0">
							<li>
								<a
									class="user-mobile-item"
									href="{% url 'blog:my_articles' %}"
									><i class="fa-solid fa-file-lines me-2"></i>
									Mis artículos</a
								>
							</li>
							<li>
								<a
									class="user-mobile-item"
									href="{% url 'user_auth:profile_view' %}"
									><i class="fa-solid fa-user me-2"></i>
									Perfil</a
								>
							</li>
							<li>
								<hr class="dropdown-divider" />
							</li>
							<li>
								<a
									class="user-mobile-item"
									href="{% url 'user_auth:logout' %}"
									><i
										class="fa-solid fa-right-from-bracket me-2"
									></i>
									Cerrar sesión</a
								>
							</li>
						</ul>
						{% endif %}
					</div>
				</div>
			</div>
		</nav>

		<main class="flex-shrink-0">
			<div class="container">{% block content %}{% endblock %}</div>
		</main>

		<footer
			class="mt-auto py-5"
			style="background-color: var(--color-fondo-claro)"
		>
			<div class="container text-center text-muted">
				<div class="row text-start">
					<div class="col-md-4 mb-4">
						<h5 class="fw-bold text-dark mb-3">Integrate</h5>
						<ul class="list-unstyled">
							<li><a href="#" class="footer-link">Inicio</a></li>
							<li class="nav-item">
								<a
									class="nav-link"
									href="{% url 'blog:category_list' %}"
									>Catalogo</a
								>
							</li>
							<li>
								<a href="#" class="footer-link">Colecciones</a>
							</li>
						</ul>
					</div>
					<div class="col-md-4 mb-4">
						<h5 class="fw-bold text-dark mb-3">Sobre Integrate</h5>
						<ul class="list-unstyled">
							<li>
								<a href="#" class="footer-link"
									>¿Quiénes somos?</a
								>
							</li>
							<li>
								<a href="#" class="footer-link"
									>Misión y visión</a
								>
							</li>
							<li>
								<a href="#" class="footer-link">Contáctanos</a>
							</li>
						</ul>
					</div>
					{% if user.is_authenticated %}
					<div class="col-md-4 mb-4">
						<h5 class="fw-bold text-dark mb-3">
							Bienvenido {{user.username}}
						</h5>
						<ul class="list-unstyled">
							<li>
								<a
									class="footer-link"
									href="{% url 'user_auth:profile_view' %}"
									>Perfil</a
								>
							</li>
							<li>
								<a
									class="footer-link"
									href="{% url 'blog:my_articles' %}"
									>Mis artículos</a
								>
							</li>
							<li>
								<a
									class="footer-link"
									href="{% url 'user_auth:logout' %}"
									>Cerrar sesión</a
								>
							</li>
						</ul>
					</div>
					{% else %}
					<div class="col-md-4 mb-4">
						<h5 class="fw-bold text-dark mb-3">Regístrate</h5>
						<ul class="list-unstyled">
							<li>
								<a
									href="{% url 'user_auth:register' %}"
									class="footer-link"
									>¿No tienes cuenta?</a
								>
							</li>
							<li>
								<a href="#" class="footer-link"
									>¿Olvidaste tu contraseña?</a
								>
							</li>
							<li>
								<a
									href="{% url 'user_auth:login' %}"
									class="footer-link"
									>Iniciar sesión</a
								>
							</li>
						</ul>
					</div>
					{% endif %}
				</div>
				<div
					class="d-flex justify-content-center fs-4 my-4 social-icons"
				>
					<a href="#" class="mx-3"
						><i class="fab fa-facebook-f"></i
					></a>
					<a href="#" class="mx-3"
						><i class="fab fa-instagram"></i
					></a>
					<a href="#" class="mx-3"><i class="fab fa-youtube"></i></a>
					<a href="#" class="mx-3"><i class="fab fa-twitter"></i></a>
				</div>
				<p>&copy; 2025 Integrate. Todos los derechos reservados.</p>
			</div>
		</footer>

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	</body>
</html>
