{% extends 'blog/base.html' %}
{% load static %}

{% block title %}Artículos de {{ category.name }}{% endblock %}

{% block content %}
<main class="container my-5">
    <!-- Título dinámico para la categoría -->
    <h1 class="fw-bold mb-4 border-bottom pb-3">Artículos de {{ category.name }}</h1>

    {% if articles %}
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
        {% for article in articles %}
        <div class="col">
            <div class="card h-100 shadow-sm article-card">
                <div class="card-img-container">
                    <!-- Usar una imagen de marcador de posición si no hay imagen destacada -->
                    <img src="{% if article.featured_image %}
                        {{ article.featured_image.url }}
                      {% else %}
                        {% static 'img/articulo-sin-imagen.png' %}
                      {% endif %}"
                      class="card-img-top"
                      alt="{{ article.title }}" />
                  </div>
                <div class="card-body d-flex flex-column">
                    <small class="text-grey mb-2">
                        Autor |{% for category in article.category.all %}
                          {{ category.name }}
                        {% endfor %}
                      </small>
                    <h5 class="card-title fw-bold">{{ article.title }}</h5>
                    <p class="card-subtitle mb-3 text-grey">
                        Por <span class="fw-bold text-orange">{{ article.user.username }}</span> | {{ article.created_at|date:'d M, Y' }}
                    </p>
                    <span style="color: #FF6C2E; margin-bottom: -0.2rem; margin-top: -1.8rem;">_____</span>
                    <p class="card-text text-truncate-3-lines article-text">{{ article.content }}</p>
                    <div class="mt-auto">
                        <a href="{% url 'blog:article_detail' article.slug %}" class="btn btn-orange w-100 fw-bold">Seguir leyendo</a>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="col-12 text-center">
        <p class="lead">No hay artículos disponibles para esta categoría.</p>
    </div>
    {% endif %}
</main>
{% endblock %}
